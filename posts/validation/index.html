<!doctype html><html lang=简体中文 dir=简体中文><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Spring中Validation注解使用 | Ethan'blog</title>
<meta name=keywords content="spring"><meta name=description content='在日常开发中，参数校验是一个常见需求，而 Java 的 Bean Validation 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。
本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：

引入依赖
简单示例
常见校验注解分类与说明
分组校验
自定义校验


1. 引入依赖
在使用 Spring 校验功能之前，需要引入相关依赖。
通常使用 Hibernate Validator 作为 JSR 380 的实现。
Maven


1
2
3
4


<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>


Gradle


1


implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;



2. 简单示例
以下是一个基本的参数校验示例。我们通过 @NotNull, @Size 等注解对参数进行校验，并在校验失败时返回错误信息。
数据模型


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29


import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

public class User {
    @NotNull(message = "用户名不能为空")
    @Size(min = 3, max = 15, message = "用户名长度必须在3到15个字符之间")
    private String username;

    @NotNull(message = "密码不能为空")
    @Size(min = 6, message = "密码长度至少为6个字符")
    private String password;

    // Getter & Setter
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
}


Controller


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15


import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;

@RestController
@RequestMapping("/users")
@Validated
public class UserController {

    @PostMapping("/register")
    public String register(@RequestBody @Valid User user) {
        return "用户注册成功：" + user.getUsername();
    }
}


测试
请求示例：'><meta name=author content="Ethan"><link rel=canonical href=https://azasdw.github.io/posts/validation/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://azasdw.github.io/icon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://azasdw.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://azasdw.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://azasdw.github.io/apple-touch-icon.png><link rel=mask-icon href=https://azasdw.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=简体中文 href=https://azasdw.github.io/posts/validation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://azasdw.github.io/posts/validation/"><meta property="og:site_name" content="Ethan'blog"><meta property="og:title" content="Spring中Validation注解使用"><meta property="og:description" content='在日常开发中，参数校验是一个常见需求，而 Java 的 Bean Validation 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。
本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：
引入依赖 简单示例 常见校验注解分类与说明 分组校验 自定义校验 1. 引入依赖 在使用 Spring 校验功能之前，需要引入相关依赖。
通常使用 Hibernate Validator 作为 JSR 380 的实现。
Maven 1 2 3 4 <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-validation</artifactId> </dependency> Gradle 1 implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39; 2. 简单示例 以下是一个基本的参数校验示例。我们通过 @NotNull, @Size 等注解对参数进行校验，并在校验失败时返回错误信息。
数据模型 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import javax.validation.constraints.NotNull; import javax.validation.constraints.Size; public class User { @NotNull(message = "用户名不能为空") @Size(min = 3, max = 15, message = "用户名长度必须在3到15个字符之间") private String username; @NotNull(message = "密码不能为空") @Size(min = 6, message = "密码长度至少为6个字符") private String password; // Getter & Setter public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import org.springframework.validation.annotation.Validated; import org.springframework.web.bind.annotation.*; import javax.validation.Valid; @RestController @RequestMapping("/users") @Validated public class UserController { @PostMapping("/register") public String register(@RequestBody @Valid User user) { return "用户注册成功：" + user.getUsername(); } } 测试 请求示例：'><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-30T12:46:50+08:00"><meta property="article:modified_time" content="2024-11-30T12:46:50+08:00"><meta property="article:tag" content="Spring"><meta name=twitter:card content="summary"><meta name=twitter:title content="Spring中Validation注解使用"><meta name=twitter:description content='在日常开发中，参数校验是一个常见需求，而 Java 的 Bean Validation 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。
本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：

引入依赖
简单示例
常见校验注解分类与说明
分组校验
自定义校验


1. 引入依赖
在使用 Spring 校验功能之前，需要引入相关依赖。
通常使用 Hibernate Validator 作为 JSR 380 的实现。
Maven


1
2
3
4


<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>


Gradle


1


implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;



2. 简单示例
以下是一个基本的参数校验示例。我们通过 @NotNull, @Size 等注解对参数进行校验，并在校验失败时返回错误信息。
数据模型


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29


import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

public class User {
    @NotNull(message = "用户名不能为空")
    @Size(min = 3, max = 15, message = "用户名长度必须在3到15个字符之间")
    private String username;

    @NotNull(message = "密码不能为空")
    @Size(min = 6, message = "密码长度至少为6个字符")
    private String password;

    // Getter & Setter
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
}


Controller


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15


import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;

@RestController
@RequestMapping("/users")
@Validated
public class UserController {

    @PostMapping("/register")
    public String register(@RequestBody @Valid User user) {
        return "用户注册成功：" + user.getUsername();
    }
}


测试
请求示例：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://azasdw.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Spring中Validation注解使用","item":"https://azasdw.github.io/posts/validation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Spring中Validation注解使用","name":"Spring中Validation注解使用","description":"在日常开发中，参数校验是一个常见需求，而 Java 的 Bean Validation 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。\n本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：\n引入依赖 简单示例 常见校验注解分类与说明 分组校验 自定义校验 1. 引入依赖 在使用 Spring 校验功能之前，需要引入相关依赖。\n通常使用 Hibernate Validator 作为 JSR 380 的实现。\nMaven 1 2 3 4 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-validation\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; Gradle 1 implementation \u0026#39;org.springframework.boot:spring-boot-starter-validation\u0026#39; 2. 简单示例 以下是一个基本的参数校验示例。我们通过 @NotNull, @Size 等注解对参数进行校验，并在校验失败时返回错误信息。\n数据模型 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import javax.validation.constraints.NotNull; import javax.validation.constraints.Size; public class User { @NotNull(message = \u0026#34;用户名不能为空\u0026#34;) @Size(min = 3, max = 15, message = \u0026#34;用户名长度必须在3到15个字符之间\u0026#34;) private String username; @NotNull(message = \u0026#34;密码不能为空\u0026#34;) @Size(min = 6, message = \u0026#34;密码长度至少为6个字符\u0026#34;) private String password; // Getter \u0026amp; Setter public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import org.springframework.validation.annotation.Validated; import org.springframework.web.bind.annotation.*; import javax.validation.Valid; @RestController @RequestMapping(\u0026#34;/users\u0026#34;) @Validated public class UserController { @PostMapping(\u0026#34;/register\u0026#34;) public String register(@RequestBody @Valid User user) { return \u0026#34;用户注册成功：\u0026#34; + user.getUsername(); } } 测试 请求示例：\n","keywords":["spring"],"articleBody":"在日常开发中，参数校验是一个常见需求，而 Java 的 Bean Validation 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。\n本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：\n引入依赖 简单示例 常见校验注解分类与说明 分组校验 自定义校验 1. 引入依赖 在使用 Spring 校验功能之前，需要引入相关依赖。\n通常使用 Hibernate Validator 作为 JSR 380 的实现。\nMaven 1 2 3 4 org.springframework.boot spring-boot-starter-validation Gradle 1 implementation 'org.springframework.boot:spring-boot-starter-validation' 2. 简单示例 以下是一个基本的参数校验示例。我们通过 @NotNull, @Size 等注解对参数进行校验，并在校验失败时返回错误信息。\n数据模型 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import javax.validation.constraints.NotNull; import javax.validation.constraints.Size; public class User { @NotNull(message = \"用户名不能为空\") @Size(min = 3, max = 15, message = \"用户名长度必须在3到15个字符之间\") private String username; @NotNull(message = \"密码不能为空\") @Size(min = 6, message = \"密码长度至少为6个字符\") private String password; // Getter \u0026 Setter public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import org.springframework.validation.annotation.Validated; import org.springframework.web.bind.annotation.*; import javax.validation.Valid; @RestController @RequestMapping(\"/users\") @Validated public class UserController { @PostMapping(\"/register\") public String register(@RequestBody @Valid User user) { return \"用户注册成功：\" + user.getUsername(); } } 测试 请求示例：\n请求 Body 1 2 3 4 { \"username\": \"john\", \"password\": \"123456\" } 响应成功 用 户 注 册 成 功 ： j o h n 错误请求 Body 1 2 3 4 { \"username\": \"jo\", \"password\": \"\" } 响应失败 1 2 3 4 5 6 { \"timestamp\": \"2024-11-18T12:34:56.789\", \"status\": 400, \"error\": \"Bad Request\", \"message\": \"用户名长度必须在3到15个字符之间; 密码不能为空\" } 3. 常见校验注解分类与说明 通用校验 注解 功能说明 示例 @NotNull 字段不能为空 @NotNull(message=\"必填\") @NotBlank 字符串非空且非空白 @NotBlank(message=\"必填\") @NotEmpty 集合或数组不能为空 @NotEmpty @Size 字符串、集合长度校验 @Size(min=1, max=10) 数值校验 注解 功能说明 示例 @Min 值必须大于等于指定值 @Min(18) @Max 值必须小于等于指定值 @Max(100) @Positive 值必须为正数 @Positive @PositiveOrZero 值必须为正数或零 @PositiveOrZero @Negative 值必须为负数 @Negative 字符串校验 注解 功能说明 示例 @Email 必须是合法邮箱地址 @Email(message=\"邮箱格式错误\") @Pattern 必须匹配正则表达式 @Pattern(regexp=\"\\\\d{3}-\\\\d{3}\") 日期校验 注解 功能说明 示例 @Past 必须是过去的日期 @Past @Future 必须是将来的日期 @Future @PastOrPresent 必须是过去或当前日期 @PastOrPresent @FutureOrPresent 必须是将来或当前日期 @FutureOrPresent Validation关于直接对JSON的日期格式进行校验，需要使用正则表达式 @Pattern(regexp = “\")或者自定义注解，建议直接使用Jackson的@JsonFormat。\n4. 分组校验 在实际项目中，不同场景可能需要不同的校验规则，例如新增和更新时字段要求可能不同。可以通过 分组校验 实现。\n分组接口 1 2 3 4 public class Group{ public interface CreateGroup {} public interface UpdateGroup {} } 数据模型 1 2 3 4 5 6 7 8 9 10 11 12 13 14 import javax.validation.constraints.*; public class User { @NotNull(message = \"用户ID不能为空\", groups = Group.UpdateGroup.class) private Long id; @NotBlank(message = \"用户名不能为空\", groups = Group.CreateGroup.class) private String username; @NotBlank(message = \"密码不能为空\", groups = GroupCreateGroup.class) private String password; // Getter \u0026 Setter } Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import org.springframework.validation.annotation.Validated; import org.springframework.web.bind.annotation.*; @RestController @RequestMapping(\"/users\") @Validated public class UserController { @PostMapping(\"/create\") public String create(@RequestBody @Validated(CreateGroup.class) User user) { return \"创建成功：\" + user.getUsername(); } @PostMapping(\"/update\") public String update(@RequestBody @Validated(UpdateGroup.class) User user) { return \"更新成功：\" + user.getId(); } } 5. 自定义校验 当现有的注解无法满足需求时，可以自定义校验注解。\n自定义注解 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import javax.validation.Constraint; import javax.validation.Payload; import java.lang.annotation.*; @Documented @Constraint(validatedBy = UsernameValidator.class) // 关联校验器 @Target(ElementType.FIELD) @Retention(RetentionPolicy.RUNTIME) public @interface ValidUsername { String message() default \"用户名非法\"; Class\u003c?\u003e[] groups() default {}; Class\u003c? extends Payload\u003e[] payload() default {}; } 自定义校验器 1 2 3 4 5 6 7 8 9 import javax.validation.ConstraintValidator; import javax.validation.ConstraintValidatorContext; public class UsernameValidator implements ConstraintValidator { @Override public boolean isValid(String value, ConstraintValidatorContext context) { return value != null \u0026\u0026 value.matches(\"^[a-zA-Z0-9]+$\"); } } 使用自定义注解 1 2 3 4 5 6 public class User { @ValidUsername private String username; // Getter \u0026 Setter } ","wordCount":"561","inLanguage":"简体中文","datePublished":"2024-11-30T12:46:50+08:00","dateModified":"2024-11-30T12:46:50+08:00","author":{"@type":"Person","name":"Ethan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://azasdw.github.io/posts/validation/"},"publisher":{"@type":"Organization","name":"Ethan'blog","logo":{"@type":"ImageObject","url":"https://azasdw.github.io/icon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://azasdw.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://azasdw.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://azasdw.github.io/english/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://azasdw.github.io/ title=🏠主页><span>🏠主页</span></a></li><li><a href=https://azasdw.github.io/archives/ title=⏱时间轴><span>⏱时间轴</span></a></li><li><a href=https://azasdw.github.io/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://azasdw.github.io/about/ title=🙋🏻‍♂️关于我><span>🙋🏻‍♂️关于我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://azasdw.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://azasdw.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Spring中Validation注解使用</h1><div class=post-meta><span title='2024-11-30 12:46:50 +0800 +0800'>November 30, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;561 words&nbsp;·&nbsp;Ethan</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#1-引入依赖>1. 引入依赖</a><ul><li><a href=#maven>Maven</a></li><li><a href=#gradle>Gradle</a></li></ul></li><li><a href=#2-简单示例>2. 简单示例</a><ul><li><a href=#数据模型>数据模型</a></li><li><a href=#controller>Controller</a></li><li><a href=#测试>测试</a></li></ul></li><li><a href=#3-常见校验注解分类与说明>3. 常见校验注解分类与说明</a><ul><li><a href=#通用校验>通用校验</a></li><li><a href=#数值校验>数值校验</a></li><li><a href=#字符串校验>字符串校验</a></li><li><a href=#日期校验>日期校验</a></li></ul></li><li><a href=#4-分组校验>4. 分组校验</a><ul><li><a href=#分组接口>分组接口</a></li><li><a href=#数据模型-1>数据模型</a></li><li><a href=#controller-1>Controller</a></li></ul></li><li><a href=#5-自定义校验>5. 自定义校验</a><ul><li><a href=#自定义注解>自定义注解</a></li><li><a href=#自定义校验器>自定义校验器</a></li><li><a href=#使用自定义注解>使用自定义注解</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>在日常开发中，参数校验是一个常见需求，而 Java 的 <strong>Bean Validation</strong> 提供了一种优雅的方式，通过注解对对象的字段进行校验。Spring 对此功能进行了深度整合，使得在 Controller、Service 等层面实现校验变得非常简单。</p><p>本文将从以下几个方面介绍如何在 Spring 中使用 Validation 注解：</p><ol><li>引入依赖</li><li>简单示例</li><li>常见校验注解分类与说明</li><li>分组校验</li><li>自定义校验</li></ol><hr><h2 id=1-引入依赖>1. 引入依赖<a hidden class=anchor aria-hidden=true href=#1-引入依赖>#</a></h2><p>在使用 Spring 校验功能之前，需要引入相关依赖。<br>通常使用 Hibernate Validator 作为 JSR 380 的实现。</p><h3 id=maven>Maven<a hidden class=anchor aria-hidden=true href=#maven>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=font-weight:700>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>&lt;groupId&gt;</span>org.springframework.boot<span style=font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>&lt;artifactId&gt;</span>spring-boot-starter-validation<span style=font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=font-weight:700>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=gradle>Gradle<a hidden class=anchor aria-hidden=true href=#gradle>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>implementation <span style=color:#0ff;font-weight:700>&#39;org.springframework.boot:spring-boot-starter-validation&#39;</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=2-简单示例>2. 简单示例<a hidden class=anchor aria-hidden=true href=#2-简单示例>#</a></h2><p>以下是一个基本的参数校验示例。我们通过 <code>@NotNull</code>, <code>@Size</code> 等注解对参数进行校验，并在校验失败时返回错误信息。</p><h3 id=数据模型>数据模型<a hidden class=anchor aria-hidden=true href=#数据模型>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">29
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.constraints.NotNull;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.constraints.Size;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> User {
</span></span><span style=display:flex><span>    @NotNull(message = <span style=color:#0ff;font-weight:700>&#34;用户名不能为空&#34;</span>)
</span></span><span style=display:flex><span>    @Size(min = 3, max = 15, message = <span style=color:#0ff;font-weight:700>&#34;用户名长度必须在3到15个字符之间&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> String username;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @NotNull(message = <span style=color:#0ff;font-weight:700>&#34;密码不能为空&#34;</span>)
</span></span><span style=display:flex><span>    @Size(min = 6, message = <span style=color:#0ff;font-weight:700>&#34;密码长度至少为6个字符&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> String password;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007f7f>// Getter &amp; Setter</span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> String getUsername() {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> username;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>void</span> setUsername(String username) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>this</span>.<span style=color:#007f7f>username</span> = username;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> String getPassword() {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> password;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>void</span> setPassword(String password) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>this</span>.<span style=color:#007f7f>password</span> = password;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=controller>Controller<a hidden class=anchor aria-hidden=true href=#controller>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> org.springframework.validation.annotation.Validated;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> org.springframework.web.bind.annotation.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.Valid;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@RestController
</span></span><span style=display:flex><span>@RequestMapping(<span style=color:#0ff;font-weight:700>&#34;/users&#34;</span>)
</span></span><span style=display:flex><span>@Validated
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> UserController {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @PostMapping(<span style=color:#0ff;font-weight:700>&#34;/register&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> String register(@RequestBody @Valid User user) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> <span style=color:#0ff;font-weight:700>&#34;用户注册成功：&#34;</span> + user.<span style=color:#007f7f>getUsername</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=测试>测试<a hidden class=anchor aria-hidden=true href=#测试>#</a></h3><p>请求示例：</p><h4 id=请求-body>请求 Body<a hidden class=anchor aria-hidden=true href=#请求-body>#</a></h4><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;username&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;john&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;password&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;123456&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=响应成功>响应成功<a hidden class=anchor aria-hidden=true href=#响应成功>#</a></h4><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 96 25"><g transform="translate(8,16)"><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">用</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">户</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">注</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">册</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">成</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">功</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">：</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="64" y="4" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">n</text></g></svg></div><h4 id=错误请求-body>错误请求 Body<a hidden class=anchor aria-hidden=true href=#错误请求-body>#</a></h4><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;username&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;jo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;password&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=响应失败>响应失败<a hidden class=anchor aria-hidden=true href=#响应失败>#</a></h4><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;timestamp&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;2024-11-18T12:34:56.789&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;status&#34;</span>: <span style=color:#ff0;font-weight:700>400</span>,
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;error&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;Bad Request&#34;</span>,
</span></span><span style=display:flex><span>    <span style=font-weight:700>&#34;message&#34;</span>: <span style=color:#0ff;font-weight:700>&#34;用户名长度必须在3到15个字符之间; 密码不能为空&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=3-常见校验注解分类与说明>3. 常见校验注解分类与说明<a hidden class=anchor aria-hidden=true href=#3-常见校验注解分类与说明>#</a></h2><h3 id=通用校验>通用校验<a hidden class=anchor aria-hidden=true href=#通用校验>#</a></h3><table><thead><tr><th>注解</th><th>功能说明</th><th>示例</th></tr></thead><tbody><tr><td><code>@NotNull</code></td><td>字段不能为空</td><td><code>@NotNull(message="必填")</code></td></tr><tr><td><code>@NotBlank</code></td><td>字符串非空且非空白</td><td><code>@NotBlank(message="必填")</code></td></tr><tr><td><code>@NotEmpty</code></td><td>集合或数组不能为空</td><td><code>@NotEmpty</code></td></tr><tr><td><code>@Size</code></td><td>字符串、集合长度校验</td><td><code>@Size(min=1, max=10)</code></td></tr></tbody></table><h3 id=数值校验>数值校验<a hidden class=anchor aria-hidden=true href=#数值校验>#</a></h3><table><thead><tr><th>注解</th><th>功能说明</th><th>示例</th></tr></thead><tbody><tr><td><code>@Min</code></td><td>值必须大于等于指定值</td><td><code>@Min(18)</code></td></tr><tr><td><code>@Max</code></td><td>值必须小于等于指定值</td><td><code>@Max(100)</code></td></tr><tr><td><code>@Positive</code></td><td>值必须为正数</td><td><code>@Positive</code></td></tr><tr><td><code>@PositiveOrZero</code></td><td>值必须为正数或零</td><td><code>@PositiveOrZero</code></td></tr><tr><td><code>@Negative</code></td><td>值必须为负数</td><td><code>@Negative</code></td></tr></tbody></table><h3 id=字符串校验>字符串校验<a hidden class=anchor aria-hidden=true href=#字符串校验>#</a></h3><table><thead><tr><th>注解</th><th>功能说明</th><th>示例</th></tr></thead><tbody><tr><td><code>@Email</code></td><td>必须是合法邮箱地址</td><td><code>@Email(message="邮箱格式错误")</code></td></tr><tr><td><code>@Pattern</code></td><td>必须匹配正则表达式</td><td><code>@Pattern(regexp="\\d{3}-\\d{3}")</code></td></tr></tbody></table><h3 id=日期校验>日期校验<a hidden class=anchor aria-hidden=true href=#日期校验>#</a></h3><table><thead><tr><th>注解</th><th>功能说明</th><th>示例</th></tr></thead><tbody><tr><td><code>@Past</code></td><td>必须是过去的日期</td><td><code>@Past</code></td></tr><tr><td><code>@Future</code></td><td>必须是将来的日期</td><td><code>@Future</code></td></tr><tr><td><code>@PastOrPresent</code></td><td>必须是过去或当前日期</td><td><code>@PastOrPresent</code></td></tr><tr><td><code>@FutureOrPresent</code></td><td>必须是将来或当前日期</td><td><code>@FutureOrPresent</code></td></tr></tbody></table><blockquote><p>Validation关于直接对JSON的日期格式进行校验，需要使用正则表达式 @Pattern(regexp = &ldquo;")或者自定义注解，建议直接使用Jackson的@JsonFormat。</p></blockquote><hr><h2 id=4-分组校验>4. 分组校验<a hidden class=anchor aria-hidden=true href=#4-分组校验>#</a></h2><p>在实际项目中，不同场景可能需要不同的校验规则，例如新增和更新时字段要求可能不同。可以通过 <strong>分组校验</strong> 实现。</p><h3 id=分组接口>分组接口<a hidden class=anchor aria-hidden=true href=#分组接口>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> Group{
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>interface</span> CreateGroup {}
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>interface</span> UpdateGroup {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=数据模型-1>数据模型<a hidden class=anchor aria-hidden=true href=#数据模型-1>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.constraints.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> User {
</span></span><span style=display:flex><span>    @NotNull(message = <span style=color:#0ff;font-weight:700>&#34;用户ID不能为空&#34;</span>, groups = Group.<span style=color:#007f7f>UpdateGroup</span>.<span style=color:#007f7f>class</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> Long id;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @NotBlank(message = <span style=color:#0ff;font-weight:700>&#34;用户名不能为空&#34;</span>, groups = Group.<span style=color:#007f7f>CreateGroup</span>.<span style=color:#007f7f>class</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> String username;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @NotBlank(message = <span style=color:#0ff;font-weight:700>&#34;密码不能为空&#34;</span>, groups = GroupCreateGroup.<span style=color:#007f7f>class</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> String password;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007f7f>// Getter &amp; Setter</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=controller-1>Controller<a hidden class=anchor aria-hidden=true href=#controller-1>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> org.springframework.validation.annotation.Validated;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> org.springframework.web.bind.annotation.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@RestController
</span></span><span style=display:flex><span>@RequestMapping(<span style=color:#0ff;font-weight:700>&#34;/users&#34;</span>)
</span></span><span style=display:flex><span>@Validated
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> UserController {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @PostMapping(<span style=color:#0ff;font-weight:700>&#34;/create&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> String create(@RequestBody @Validated(CreateGroup.<span style=color:#007f7f>class</span>) User user) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> <span style=color:#0ff;font-weight:700>&#34;创建成功：&#34;</span> + user.<span style=color:#007f7f>getUsername</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @PostMapping(<span style=color:#0ff;font-weight:700>&#34;/update&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> String update(@RequestBody @Validated(UpdateGroup.<span style=color:#007f7f>class</span>) User user) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> <span style=color:#0ff;font-weight:700>&#34;更新成功：&#34;</span> + user.<span style=color:#007f7f>getId</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=5-自定义校验>5. 自定义校验<a hidden class=anchor aria-hidden=true href=#5-自定义校验>#</a></h2><p>当现有的注解无法满足需求时，可以自定义校验注解。</p><h3 id=自定义注解>自定义注解<a hidden class=anchor aria-hidden=true href=#自定义注解>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.Constraint;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.Payload;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> java.lang.annotation.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@Documented
</span></span><span style=display:flex><span>@Constraint(validatedBy = UsernameValidator.<span style=color:#007f7f>class</span>) <span style=color:#007f7f>// 关联校验器</span>
</span></span><span style=display:flex><span>@Target(ElementType.<span style=color:#007f7f>FIELD</span>)
</span></span><span style=display:flex><span>@Retention(RetentionPolicy.<span style=color:#007f7f>RUNTIME</span>)
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> @interface ValidUsername {
</span></span><span style=display:flex><span>    String message() <span style=color:#fff;font-weight:700>default</span> <span style=color:#0ff;font-weight:700>&#34;用户名非法&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Class&lt;?&gt;[] groups() <span style=color:#fff;font-weight:700>default</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Class&lt;? <span style=color:#fff;font-weight:700>extends</span> Payload&gt;[] payload() <span style=color:#fff;font-weight:700>default</span> {};
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=自定义校验器>自定义校验器<a hidden class=anchor aria-hidden=true href=#自定义校验器>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.ConstraintValidator;
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>import</span> javax.validation.ConstraintValidatorContext;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> UsernameValidator <span style=color:#fff;font-weight:700>implements</span> ConstraintValidator&lt;ValidUsername, String&gt; {
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>boolean</span> isValid(String value, ConstraintValidatorContext context) {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> value != <span style=color:#fff;font-weight:700>null</span> &amp;&amp; value.<span style=color:#007f7f>matches</span>(<span style=color:#0ff;font-weight:700>&#34;^[a-zA-Z0-9]+$&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=使用自定义注解>使用自定义注解<a hidden class=anchor aria-hidden=true href=#使用自定义注解>#</a></h3><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#fff;font-weight:700>public</span> <span style=color:#fff;font-weight:700>class</span> User {
</span></span><span style=display:flex><span>    @ValidUsername
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>private</span> String username;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007f7f>// Getter &amp; Setter</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://azasdw.github.io/tags/spring/>Spring</a></li></ul><nav class=paginav><a class=prev href=https://azasdw.github.io/posts/hello-world/><span class=title>«</span><br><span>Hello World</span>
</a><a class=next href=https://azasdw.github.io/posts/frp/><span class=title>»</span><br><span>frp实现内网穿透</span></a></nav></footer></article></main><footer class=footer><span>eternity</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>